# Safe command patterns - commands that are allowed to execute
# Commands matching any of these patterns will be approved

# git read operations (with optional -C flag)
[[command]]
pattern = '^git\s+(-C\s+\S+\s+)?(diff|log|status|show|branch|stash\s+list|bisect|worktree\s+list|fetch)\b'
name = "git read op"

# git write operations
[[command]]
pattern = '^git\s+(-C\s+\S+\s+)?(add|checkout|merge|rebase|stash)\b'
name = "git write op"

# pytest
[[command]]
pattern = '^pytest\b'
name = "pytest"

# python
[[command]]
pattern = '^python\b'
name = "python"

# ruff (python linter/formatter)
[[command]]
pattern = '^ruff\b'
name = "ruff"

# uv (python package manager)
[[command]]
pattern = '^uv\s+(pip|run|sync|venv|add|remove|lock)\b'
name = "uv"

# uvx (uv tool runner)
[[command]]
pattern = '^uvx\b'
name = "uvx"

# npm
[[command]]
pattern = '^npm\s+(install|run|test|build|ci)\b'
name = "npm"

# npx
[[command]]
pattern = '^npx\b'
name = "npx"

# cargo (rust)
[[command]]
pattern = '^cargo\s+(build|test|run|check|clippy|fmt|clean)\b'
name = "cargo"

# maturin (rust python bindings)
[[command]]
pattern = '^maturin\s+(develop|build)\b'
name = "maturin"

# make
[[command]]
pattern = '^make\b'
name = "make"

# common read-only commands
[[command]]
pattern = '^(ls|cat|head|tail|wc|find|grep|rg|file|which|pwd|du|df|curl|sort|uniq|cut|tr|awk|sed|xargs)\b'
name = "read-only"

# touch (update timestamps, create empty files)
[[command]]
pattern = '^touch\b'
name = "touch"

# shell builtins for control flow
[[command]]
pattern = '^(true|false|exit(\s+\d+)?)$'
name = "shell builtin"

# pkill/kill (process management)
[[command]]
pattern = '^(pkill|kill)\b'
name = "process mgmt"

# echo (often used for logging/separators in chained commands)
[[command]]
pattern = '^echo\b'
name = "echo"

# cd (change directory, often first in a chain)
[[command]]
pattern = '^cd\s'
name = "cd"

# source/. (activate scripts, set env)
[[command]]
pattern = '^(source|\.) [^\s]*venv/bin/activate'
name = "venv activate"

# sleep (delays, often used in scripts)
[[command]]
pattern = '^sleep\s'
name = "sleep"

# variable assignment (VAR=value, VAR=$!, etc.)
[[command]]
pattern = '^[A-Z_][A-Z0-9_]*=\S*$'
name = "var assignment"

# for loop
[[command]]
pattern = '^for\s+\w+\s+in\s'
name = "for loop"

# while loop
[[command]]
pattern = '^while\s'
name = "while loop"

# done (end of loop)
[[command]]
pattern = '^done$'
name = "done"
